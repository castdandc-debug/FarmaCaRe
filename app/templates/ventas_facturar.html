{% extends "base.html" %}
{% block title %}Facturar Venta{% endblock %}

{% block content %}
<div class="container mt-4">
    <a href="{{ url_for('ventas.listado') }}" class="btn btn-secondary mb-3">&larr; Volver al listado</a>
    <h2>Facturar venta (Folio: {{ venta.folio }})</h2>
    <form method="POST">
        <div class="mb-3">
            <label class="form-label">RFC del cliente:</label>
            <input type="text" name="rfc" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">MÃ©todo de pago:</label>
            <select name="metodo_pago" class="form-select">
                <option value="efectivo" {% if venta.metodo_pago=="efectivo" %}selected{% endif %}>Efectivo</option>
                <option value="tarjeta" {% if venta.metodo_pago=="tarjeta" %}selected{% endif %}>Tarjeta</option>
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Productos vendidos:</label>
            <ul class="list-group">
                {% for d in detalles %}
                    <li class="list-group-item">
                        {{ d.producto.nombre_comercial }} | Cant: {{ d.cantidad }} | ${{ '%.2f'|format(d.precio_unitario) }}
                    </li>
                {% endfor %}
            </ul>
        </div>
        <button type="submit" class="btn btn-success">Generar factura</button>
    </form>
</div>
{% endblock %}
